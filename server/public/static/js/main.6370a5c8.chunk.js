(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t){},26:function(e,t,a){e.exports=a(62)},33:function(e,t,a){},35:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},36:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);a(27);var n=a(0),r=a.n(n),l=a(23),s=a.n(l),o=(a(33),a(3)),c=a(7),i=a(9),u=a(8),m=a(10),g=(a(35),a(36),a(66)),d=a(65),p=a(63),h=a(12),v=a.n(h),b=function e(){var t=this;Object(o.a)(this,e),this.signup=function(e,a,n,r){return t.service.post("/signup",{username:e,password:a,email:n,roll:r}).then(function(e){return e.data})},this.login=function(e,a){return t.service.post("/login",{username:e,password:a}).then(function(e){return e.data})},this.loggedin=function(){return t.service.get("/currentuser").then(function(e){return e.data})},this.logout=function(){return t.service.get("/logout").then(function(e){return e.data})},this.service=v.a.create({baseURL:"".concat("https://app-rollout.herokuapp.com","/auth"),withCredenteials:!0})},f=(a(57),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleLogout=function(e){a.props.logout()},a.state={loggedInUser:null},a.service=new b,a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return this.props.userInSession?r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement(p.a,{className:"navbar-brand",to:"/"},"Rollout App"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(p.a,{className:"nav-link",to:"/projects"},"Proyects")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(p.a,{className:"nav-link",to:"/sites"},"Sites")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(p.a,{className:"nav-link disabled",to:"/consultas"},"Consultas")),r.a.createElement("li",{className:"nav-item active"},r.a.createElement("a",{className:"nav-link",onClick:this.handleLogout},"Logout ",r.a.createElement("span",{className:"sr-only"},"(current)"))))),r.a.createElement("h3",null,"Welcome, ",this.props.userInSession.username)):r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},r.a.createElement(p.a,{className:"navbar-brand",to:"/"},"Rollout App"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(p.a,{className:"nav-link",to:"/signup"},"Signup")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(p.a,{className:"nav-link",to:"/login"},"Login")))),r.a.createElement("h3",null,"Please, login or create an account"))}}]),t}(n.Component)),E=a(13),N=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state.username,n=a.state.password,r=a.state.email,l=a.state.roll;a.service.signup(t,n,r,l).then(function(e){a.setState({username:"",password:"",email:"",roll:""}),a.props.getUser(e.user)}).catch(function(e){return console.log(e)})},a.handleChange=function(e){console.log("evento",e.target);var t=e.target,n=t.name,r=t.value;a.setState(Object(E.a)({},n,r))},a.state={username:"",password:"",email:"",roll:"Subcontractor"},a.service=new b,a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h3",null,"Create your account:"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("fieldset",null,r.a.createElement("label",{for:"username"},"User Name:"),r.a.createElement("input",{id:"username",type:"text",name:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("fieldset",null,r.a.createElement("label",{for:"password"},"Password:"),r.a.createElement("input",{id:"password",type:"password",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("fieldset",null,r.a.createElement("label",{for:"email"},"email:"),r.a.createElement("input",{id:"email",type:"email",name:"email",value:this.state.email,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("fieldset",null,r.a.createElement("label",{for:"roll"},"Roll:"),r.a.createElement("select",{id:"roll",name:"roll",rollSel:this.state.roll,onChange:function(t){return e.handleChange(t)}},r.a.createElement("option",{value:"PManager"},"PManager"),r.a.createElement("option",{value:"PController"},"PController"),r.a.createElement("option",{value:"Subcontractor"},"Subcontractor"))),r.a.createElement("input",{type:"submit",value:"Sign up"})))}}]),t}(n.Component),w=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state.username,n=a.state.password;a.service.login(t,n).then(function(e){a.setState({username:t,password:n,error:!1}),a.props.getUser(e)}).catch(function(e){a.setState({username:t,password:n,error:!0})})},a.handleChange=function(e){console.log("evento",e.target);var t=e.target,n=t.name,r=t.value;a.setState(Object(E.a)({},n,r))},a.state={username:"",password:""},a.service=new b,a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h3",null,"Please, insert your credential to login....."),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("fieldset",null,r.a.createElement("label",{for:"username"},"User Name:"),r.a.createElement("input",{id:"username",type:"text",name:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("fieldset",null,r.a.createElement("label",{for:"password"},"Password:"),r.a.createElement("input",{id:"password",type:"password",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("input",{type:"submit",value:"Log in"})),r.a.createElement("h1",null,this.state.error?"Error":""))}}]),t}(n.Component),j=function e(){var t=this;Object(o.a)(this,e),this.getAllProjects=function(){return t.service.get("/all").then(function(e){return e.data})},this.getOneProject=function(e){return t.service.get("/".concat(e)).then(function(e){return e.data})},this.createNewProject=function(e,a){return t.service.post("/new",{projectname:e,customer:a}).then(function(e){return e.data})},this.updateOneProject=function(e,a){var n=a.newData;return t.service.put("/".concat(e),{newData:n}).then(function(e){return e.data})},this.deleteOneProject=function(e){return t.service.delete("/".concat(e)).then(function(e){return e.data})},this.service=v.a.create({baseURL:"http://localhost:3001/projects",withCredentials:!0})},O=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={loggedInUser:"",dataProjects:[]},a.pService=new j,a.uService=new b,a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.pService.getAllProjects().then(function(t){e.setState({loggedInUser:e.props.userData,dataProjects:t})})}},{key:"render",value:function(){var e=this.state.loggedInUser.username,t=this.state.dataProjects;return console.log(t),console.log("Usuario: ..",e),r.a.createElement("div",{calssName:"list-group"},r.a.createElement("button",{type:"button",calssName:"list-group-item list-group-item-action active"},r.a.createElement("h3",null,e," Projects list")),r.a.createElement("ul",{className:"list-group"},r.a.createElement("li",{className:"list-group-item d-flex justify-content-between align-items-center"},"Proyecto XXX",r.a.createElement("span",{className:"badge badge-info badge-pill"},"Vi"),r.a.createElement("span",{className:"badge badge-warning badge-pill"},"ed"),r.a.createElement("span",{className:"badge badge-danger badge-pill"},"de")),r.a.createElement("li",{className:"list-group-item d-flex justify-content-between align-items-center"},"Proyecto XXX",r.a.createElement("span",{className:"badge badge-info badge-pill"},"Vi"),r.a.createElement("span",{className:"badge badge-warning badge-pill"},"ed"),r.a.createElement("span",{className:"badge badge-danger badge-pill"},"de")),r.a.createElement("li",{className:"list-group-item d-flex justify-content-between align-items-center"},"Proyecto XXX",r.a.createElement("span",{className:"badge badge-info badge-pill"},"Vi"),r.a.createElement("span",{className:"badge badge-warning badge-pill"},"ed"),r.a.createElement("span",{className:"badge badge-danger badge-pill"},"de"))))}}]),t}(n.Component),S=a(24),y=a.n(S),C=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e)))._test=function(){a.service.loggedin().then(function(e){a.setState({loggedInUser:e,isAuthenticating:!1})}).catch(function(e){a.setState({loggedInUser:!1,isAuthenticating:!1})})},a.getTheUser=function(e){a.setState({loggedInUser:e,isAuthenticating:!1})},a.logout=function(){a.service.logout().then(function(){a.setState({loggedInUser:null})})},a.state={loggedInUser:null,isAuthenticating:!0},a.service=new b,a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this._test()}},{key:"render",value:function(){var e=this;return this.state.isAuthenticating?null:this.state.loggedInUser?r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null,"APP Rollout con usuario"),r.a.createElement(f,{userInSession:this.state.loggedInUser,logout:this.logout}),r.a.createElement(g.a,null,r.a.createElement(d.a,{exact:!0,path:"/projects",render:function(){return r.a.createElement(O,{userData:e.state.loggedInUser})}}),r.a.createElement(d.a,{exact:!0,path:"/sites",render:function(){return r.a.createElement(y.a,{userData:e.state.loggedInUser})}})))):(console.log("prueba 1"),r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(f,{userInSession:this.state.loggedInUser,logout:this.logout}),r.a.createElement(g.a,null,r.a.createElement(d.a,{exact:!0,path:"/signup",render:function(){return r.a.createElement(N,{getUser:e.getTheUser})}}),r.a.createElement(d.a,{exact:!0,path:"/login",render:function(){return r.a.createElement(w,{getUser:e.getTheUser})}})))))}}]),t}(n.Component),U=a(64);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(U.a,null,r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[26,2,1]]]);
//# sourceMappingURL=main.6370a5c8.chunk.js.map